@if (issues.length === 0) {
<div class="flex items-center justify-center h-full">
    <div class="text-center">
        <h1 class="text-2xl font-bold text-gray-700">Sin asuntos</h1>
        <p class="text-gray-500">No se ha encontrado ningun asunto.</p>
    </div>
</div>
} @else {
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
    @for (issue of issues; track $index) {
    <div class="max-w-[300px] mx-auto bg-white rounded-xl shadow-md overflow-hidden m-4 cursor-pointer"
        (click)="onCardClick(issue)">
        <div class="p-4">
            <div class="uppercase tracking-wide text-sm text-indigo-500 font-semibold mb-1">
                <p>#{{issue.idissues}}</p>
            </div>
            <h2 class="block mt-1 text-lg leading-tight font-medium text-black">
                {{issue.title}}
            </h2>
            <p class="mt-2 uppercase tracking-wide text-sm text-indigo-500 font-semibold">Descripción</p>
            <p class="text-gray-500">
                {{ issue.description | truncate }}
            </p>
            <div class="mt-4 flex justify-between items-center">
                <span class="inline-block bg-gray-200 rounded-full px-3 py-1 text-sm font-semibold text-gray-700">
                    {{issue.status}}
                </span>
            </div>
        </div>
    </div>
    }

    @if (modalData) {
    <p-dialog header="Detalles del Asunto" [modal]="true" [(visible)]="modalData" [draggable]="false"
        [style]="{ width: '30rem' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
        <!-- header con reportante y fecha -->
        <p class="flex items-center text-gray-500 ">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 mr-1">
                <path fill-rule="evenodd"
                    d="M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z"
                    clip-rule="evenodd" />
            </svg>
            {{ selectedIssue?.reportedBy }}
            <span class="mx-2">|</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4 mr-1">
                <path fill-rule="evenodd"
                    d="M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z"
                    clip-rule="evenodd" />
            </svg>
            {{ selectedIssue?.reportedDate | date }}
        </p>
        <!-- cuerpo con detalles del asunto -->
        <div class="mt-4">
            <h1 class="text-2xl font-bold text-gray-700 mb-4">{{ selectedIssue?.title }}</h1>
            <p class="uppercase tracking-wide text-sm text-indigo-500 font-semibold">Descripción</p>
            <p class="text-gray-500">{{ selectedIssue?.description }}</p>
            <p class="mt-4 uppercase tracking-wide text-sm text-indigo-500 font-semibold">Estado</p>
            <p class="text-gray-500">{{ selectedIssue?.status }}</p>
            <p class="mt-4 uppercase tracking-wide text-sm text-indigo-500 font-semibold">Evidencia</p>
        </div>
        @switch (selectedIssue?.status) {
        @case ('CLOSED'){
        <div class="mt-4">
            <button class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Borrar
                Asunto</button>
            {{selectedIssue?.idissues}}
        </div>
        }
        @case ('IN_PROGRESS') {
        <div class="mt-4">
            <button class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Resolver
                asunto</button>
        </div>
        }
        @case ('PENDING') {
        <div class="mt-4">
            <button class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded">Reclamar
                Asunto</button>
        </div>
        }
        }
    </p-dialog>
    <!-- fin modal popup -->
    }
</div>
}